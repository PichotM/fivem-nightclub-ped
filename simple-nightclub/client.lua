local simplePedPos = {
	{ pos = vector3(-1599.286, -3014.479, -79.00606), heading = 74.99979 },
	{ pos = vector3(-1599.256, -3012.859, -79.00606), heading = 89.9997 },
	{ pos = vector3(-1599.485, -3011.013, -79.00606), heading = 99.99955 },
	{ pos = vector3(-1599.478, -3009.316, -79.00606), heading = 109.9995 },
	{ pos = vector3(-1598.276, -3010.419, -79.00606), heading = 89.99937 },
	{ pos = vector3(-1598.178, -3012.107, -79.00606), heading = 94.99931 },
	{ pos = vector3(-1597.81, -3013.999, -79.00606), heading = 64.99922 },
	{ pos = vector3(-1596.136, -3014.376, -79.00606), heading = 64.99922 },
	{ pos = vector3(-1596.532, -3012.257, -79.00606), heading = 84.99911 },
	{ pos = vector3(-1597.38, -3009.078, -79.00606), heading = 84.99911 },
	{ pos = vector3(-1596.245, -3010.349, -79.00606), heading = 94.99898 },
	{ pos = vector3(-1594.98, -3011.497, -79.00606), heading = 74.99896 },
	{ pos = vector3(-1594.685, -3013.496, -79.00606), heading = 89.99895 },
	{ pos = vector3(-1594.415, -3009.547, -79.00606), heading = 94.99889 },
	{ pos = vector3(-1593.241, -3011.182, -79.00606), heading = 94.99889 },
	{ pos = vector3(-1593.164, -3013.143, -79.00606), heading = 69.99878 },
	{ pos = vector3(-1593.243, -3014.435, -79.00606), heading = 69.99878 },
	{ pos = vector3(-1593.338, -3009.497, -79.00606), heading = 99.99875 },
	{ pos = vector3(-1597.302, -3013.429, -79.00606), heading = 89.99841 },
	{ pos = vector3(-1597.293, -3011.11, -79.00606), heading = 89.99841 },
	{ pos = vector3(-1595.858, -3012.948, -79.00606), heading = 89.99841 },
	{ pos = vector3(-1594.718, -3012.382, -79.00606), heading = 84.99833 },
	{ pos = vector3(-1592.485, -3011.958, -79.00606), heading = 104.9983 },
	{ pos = vector3(-1592.1, -3009.135, -79.00606), heading = 104.9983 },
	{ pos = vector3(-1594.456, -3010.849, -79.00606), heading = 74.99818 },
	{ pos = vector3(-1594.935, -3014.76, -79.00606), heading = 79.99802 },
	{ pos = vector3(-1593.958, -3012.06, -79.00606), heading = 79.99802 },
	{ pos = vector3(-1592.025, -3014.925, -79.00606), heading = 74.99796 },
	{ pos = vector3(-1592.057, -3013.273, -79.00606), heading = 74.99796 },
	{ pos = vector3(-1597.023, -3015.123, -79.00606), heading = 84.99932 },
	{ pos = vector3(-1596.166, -3011.476, -79.00606), heading = 119.999 },
	{ pos = vector3(-1595.68, -3009.549, -79.00606), heading = 119.999 },
	{ pos = vector3(-1592.181, -3010.726, -79.00606), heading = 119.999 },
	{ pos = vector3(-1598.637, -3008.974, -79.00606), heading = 129.9987 },
	{ pos = vector3(-1589.201, -3013.824, -79.00606), heading = 349.998 },
	{ pos = vector3(-1588.086, -3012.85, -79.00606), heading = 139.9975 },
	{ pos = vector3(-1589.525, -3011.373, -79.00606), heading = 104.9997 },
	{ pos = vector3(-1589.588, -3009.793, -79.00606), heading = 134.9996 },
	{ pos = vector3(-1590.238, -3016.211, -79.00606), heading = 64.99924 },
	{ pos = vector3(-1612.493, -3008.006, -79.00598), heading = 0.0 },
	{ pos = vector3(-1612.234, -3007.077, -79.00598), heading = 184.9996 },
	{ pos = vector3(-1603.387, -3004.944, -79.00606), heading = 199.9994 },
	{ pos = vector3(-1601.498, -3005.343, -79.00606), heading = 164.9993 },
	{ pos = vector3(-1601.012, -3006.264, -79.00606), heading = 159.9992 },
	{ pos = vector3(-1597.325, -3017.721, -79.00606), heading = 59.99892 },
	{ pos = vector3(-1598.735, -3018.321, -79.00606), heading = 34.99891 },
	{ pos = vector3(-1599.519, -3017.069, -79.00606), heading = 34.99886 },
	{ pos = vector3(-1598.335, -3016.935, -79.00606), heading = 34.99886 },
	{ pos = vector3(-1600.323, -3017.858, -79.00606), heading = 24.99882 },
	{ pos = vector3(-1605.931, -3014.545, -77.79105), heading = 309.9981 },
	{ pos = vector3(-1606.391, -3013.633, -77.79105), heading = 274.998 },
	--[[{ pos = vector3(-1606.21, -3011.844, -77.79105), heading = 254.9979 },
	{ pos = vector3(-1606.034, -3010.969, -77.79105), heading = 254.9979 },
	{ pos = vector3(-1605.556, -3012.632, -77.79105), heading = 279.9979 },
	{ pos = vector3(-1605.393, -3011.575, -77.79105), heading = 264.9979 },
	{ pos = vector3(-1605.247, -3013.838, -77.79105), heading = 309.9977 },
	{ pos = vector3(-1588.297, -3017.595, -79.00606), heading = 49.99993 },
	{ pos = vector3(-1589.377, -3017.98, -79.00606), heading = 9.999737 },
	{ pos = vector3(-1586.512, -3013.608, -79.00606), heading = 109.9994 },
	{ pos = vector3(-1586.575, -3014.707, -79.00606), heading = 84.99927 },
	{ pos = vector3(-1591.812, -3016.253, -79.00606), heading = 79.9994 },
	{ pos = vector3(-1597.269, -3009.916, -79.00606), heading = 139.9992 },
	{ pos = vector3(-1595.497, -3010.56, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1594.243, -3014.202, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1592.819, -3014.009, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1593.165, -3012.437, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1593.301, -3010.349, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1597.35, -3011.214, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1598.791, -3013.354, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1598.803, -3011.52, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1599.409, -3010.063, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1594.033, -3010.641, -79.00606), heading = 89.99896 },
	{ pos = vector3(-1586.844, -3007.437, -76.005), heading = 119.9996 },
	{ pos = vector3(-1588.096, -3007.108, -76.005), heading = 219.9995 },
	{ pos = vector3(-1587.767, -3008.194, -76.005), heading = 69.99921 },
	{ pos = vector3(-1591.617, -3005.606, -76.005), heading = 184.9989 },
	{ pos = vector3(-1590.441, -3005.738, -76.005), heading = 149.9988 },
	{ pos = vector3(-1590.841, -3010.893, -76.005), heading = 99.99868 },
	{ pos = vector3(-1590.943, -3013.203, -76.005), heading = 69.99854 },
	{ pos = vector3(-1588.974, -3009.629, -76.005), heading = 104.9985 },
	{ pos = vector3(-1589.04, -3010.499, -76.005), heading = 89.99847 },
	{ pos = vector3(-1589.088, -3011.289, -76.005), heading = 59.99844 },
	{ pos = vector3(-1589.014, -3014.441, -76.005), heading = 84.9984 },
	{ pos = vector3(-1589.096, -3015.45, -76.005), heading = 84.9984 },
	{ pos = vector3(-1598.902, -3002.512, -75.80515), heading = 169.9981 },
	{ pos = vector3(-1596.829, -3002.128, -75.80515), heading = 179.9978 },
	{ pos = vector3(-1595.684, -3002.082, -75.80515), heading = 179.9978 },
	{ pos = vector3(-1594.913, -3002.999, -75.80515), heading = 129.9978 }]]--
}

local randomAnim = {
	"hi_dance_crowd_15_v2_female^1",
	"hi_dance_crowd_15_v2_female^2",
	"hi_dance_crowd_15_v2_female^3",
	"hi_dance_crowd_15_v2_female^4",
	"hi_dance_crowd_15_v2_female^5",
	"hi_dance_crowd_15_v2_female^6",
	"hi_dance_crowd_15_v2_male^1",
	"hi_dance_crowd_15_v2_male^2",
	"hi_dance_crowd_15_v2_male^3",
	"hi_dance_crowd_15_v2_male^4",
	"hi_dance_crowd_15_v2_male^5",
	"hi_dance_crowd_15_v2_male^6",
	"hi_dance_crowd_17_v1_female^1",
	"hi_dance_crowd_17_v1_female^2",
	"hi_dance_crowd_17_v1_female^3",
	"hi_dance_crowd_17_v1_female^4",
	"hi_dance_crowd_17_v1_female^5",
	"hi_dance_crowd_17_v1_female^6",
	"hi_dance_crowd_17_v1_male^1",
	"hi_dance_crowd_17_v1_male^2",
	"hi_dance_crowd_09_v1_female^1",
	"hi_dance_crowd_17_v1_male^3",
	"hi_dance_crowd_09_v1_female^2",
	"hi_dance_crowd_17_v1_male^4",
	"hi_dance_crowd_17_v1_male^5",
	"hi_dance_crowd_09_v1_female^3",
	"hi_dance_crowd_17_v1_male^6",
	"hi_dance_crowd_17_v2_female^1",
	"hi_dance_crowd_09_v1_female^4",
	"hi_dance_crowd_17_v2_female^2",
	"hi_dance_crowd_17_v2_female^3",
	"hi_dance_crowd_09_v1_female^5",
	"hi_dance_crowd_17_v2_female^4",
	"hi_dance_crowd_17_v2_female^5",
	"hi_dance_crowd_09_v1_female^6",
	"hi_dance_crowd_17_v2_female^6",
	"hi_dance_crowd_09_v1_male^1",
	"hi_dance_crowd_17_v2_male^1",
	"hi_dance_crowd_17_v2_male^2",
	"hi_dance_crowd_09_v1_male^2",
	"hi_dance_crowd_17_v2_male^3",
	"hi_dance_crowd_17_v2_male^4",
	"hi_dance_crowd_09_v1_male^3",
	"hi_dance_crowd_17_v2_male^5",
	"hi_dance_crowd_17_v2_male^6",
	"hi_dance_crowd_09_v1_male^4",
	"hi_dance_crowd_09_v1_male^5",
	"hi_dance_crowd_09_v1_male^6",
	"hi_dance_crowd_09_v2_female^1",
	"hi_dance_crowd_09_v2_female^2",
	"hi_dance_crowd_09_v2_female^3",
	"hi_dance_crowd_09_v2_female^4",
	"hi_dance_crowd_09_v2_female^5",
	"hi_dance_crowd_09_v2_female^6",
	"hi_dance_crowd_09_v2_male^1",
	"hi_dance_crowd_09_v2_male^2",
	"hi_dance_crowd_09_v2_male^3",
	"hi_dance_crowd_09_v2_male^4",
	"hi_dance_crowd_09_v2_male^5",
	"hi_dance_crowd_09_v2_male^6",
	"hi_dance_crowd_11_v1_female^1",
	"hi_dance_crowd_11_v1_female^2",
	"hi_dance_crowd_11_v1_female^3",
	"hi_dance_crowd_11_v1_female^4",
	"hi_dance_crowd_11_v1_female^5",
	"hi_dance_crowd_11_v1_female^6",
	"hi_dance_crowd_11_v1_male^1",
	"hi_dance_crowd_11_v1_male^2",
	"hi_dance_crowd_11_v1_male^3",
	"hi_dance_crowd_11_v1_male^4",
	"hi_dance_crowd_11_v1_male^5",
	"hi_dance_crowd_11_v1_male^6",
	"hi_dance_crowd_13_v2_female^1",
	"hi_dance_crowd_13_v2_female^2",
	"hi_dance_crowd_13_v2_female^3",
	"hi_dance_crowd_13_v2_female^4",
	"hi_dance_crowd_13_v2_female^5",
	"hi_dance_crowd_13_v2_female^6",
	"hi_dance_crowd_13_v2_male^1",
	"hi_dance_crowd_13_v2_male^2",
	"hi_dance_crowd_13_v2_male^3",
	"hi_dance_crowd_13_v2_male^4",
	"hi_dance_crowd_13_v2_male^5",
	"hi_dance_crowd_13_v2_male^6",
	"hi_dance_crowd_15_v1_female^1",
	"hi_dance_crowd_15_v1_female^2",
	"hi_dance_crowd_15_v1_female^3",
	"hi_dance_crowd_15_v1_female^4",
	"hi_dance_crowd_15_v1_female^5",
	"hi_dance_crowd_15_v1_female^6",
	"hi_dance_crowd_15_v1_male^1",
	"hi_dance_crowd_15_v1_male^2",
	"hi_dance_crowd_15_v1_male^3",
	"hi_dance_crowd_15_v1_male^4",
	"hi_dance_crowd_15_v1_male^5",
	"hi_dance_crowd_15_v1_male^6"
}

local toggleInt = {
	[271617] = {
		["Int01_ba_Worklamps"] = false,
		["Int01_ba_security_upgrade"] = true,
		["Int01_ba_equipment_setup"] = true,
		["Int01_ba_Style01"] = false,
		["Int01_ba_Style02"] = false,
		["Int01_ba_Style03"] = true,
		["Int01_ba_style01_podium"] = false,
		["Int01_ba_style02_podium"] = true,
		["Int01_ba_style03_podium"] = false,
		["int01_ba_lights_screen"] = true,
		["Int01_ba_Screen"] = true,
		["Int01_ba_bar_content"] = true,
		["Int01_ba_booze_01"] = true,
		["Int01_ba_booze_02"] = true,
		["Int01_ba_booze_03"] = true,
		["Int01_ba_dj01"] = false,
		["Int01_ba_dj02"] = false,
		["Int01_ba_dj03"] = true,
		["Int01_ba_dj04"] = false,
		["DJ_01_Lights_01"] = false,
		["DJ_01_Lights_02"] = false,
		["DJ_01_Lights_03"] = false,
		["DJ_01_Lights_04"] = false,
		["DJ_02_Lights_01"] = false,
		["DJ_02_Lights_02"] = false,
		["DJ_02_Lights_03"] = false,
		["DJ_02_Lights_04"] = false,
		["DJ_03_Lights_01"] = false,
		["DJ_03_Lights_02"] = false,
		["DJ_03_Lights_03"] = false,
		["DJ_03_Lights_04"] = false,
		["DJ_04_Lights_01"] = false,
		["DJ_04_Lights_02"] = false,
		["DJ_04_Lights_03"] = false,
		["DJ_04_Lights_04"] = true,
		["light_rigs_off"] = false,
		["Int01_ba_lightgrid_01"] = true,
		["Int01_ba_Clutter"] = false,
		["Int01_ba_equipment_upgrade"] = true,
		["Int01_ba_clubname_01"] = false,
		["Int01_ba_clubname_02"] = false,
		["Int01_ba_clubname_03"] = false,
		["Int01_ba_clubname_04"] = false,
		["Int01_ba_clubname_05"] = false,
		["Int01_ba_clubname_06"] = false,
		["Int01_ba_clubname_07"] = false,
		["Int01_ba_clubname_08"] = true,
		["Int01_ba_clubname_09"] = false,
		["Int01_ba_dry_ice"] = true,
		["Int01_ba_deliverytruck"] = true,
		["Int01_ba_trophy04"] = true,
		["Int01_ba_trophy05"] = false,
		["Int01_ba_trophy07"] = false,
		["Int01_ba_trophy09"] = false,
		["Int01_ba_trophy08"] = false,
		["Int01_ba_trophy11"] = false,
		["Int01_ba_trophy10"] = false,
		["Int01_ba_trophy03"] = false,
		["Int01_ba_trophy01"] = false,
		["Int01_ba_trophy02"] = false,
		["Int01_ba_trad_lights"] = true,
		["Int02_ba_floor01"] = false,
		["Int02_ba_floor02"] = false,
		["Int02_ba_floor03"] = false,
		["Int02_ba_floor04"] = false,
		["Int02_ba_floor05"] = true,
	},
	[272385] = {
		["Set_Pit_Fence_Closed"] = false,
		["Set_Pit_Fence_Demolition"] = false,
		["Set_Pit_Fence_Oval"] = false,
		["set_pit_fence_ovala"] = false,
		["set_pit_fence_ovalb"] = true,
		["Set_Pit_Fence_Wall"] = false,
		["set_wall_no_pit"] = false,
		["set_centreline_dystopian_05"] = false,
		["set_centreline_scifi_05"] = false,
		["Set_CentreLine_Wasteland_05"] = false,
		["Set_Turrets"] = true,
		["set_turrets_scifi"] = false,
		["set_turrets_wasteland"] = false,
		["Set_Team_Band_A"] = true,
		["Set_Team_Band_B"] = false,
		["Set_Team_Band_C"] = false,
		["Set_Team_Band_D"] = false,
		["Set_Lights_atlantis"] = false,
		["Set_Lights_evening"] = false,
		["Set_Lights_hell"] = false,
		["Set_Lights_midday"] = false,
		["Set_Lights_morning"] = false,
		["Set_Lights_night"] = false,
		["set_lights_sfnight"] = false,
		["Set_Lights_saccharine"] = false,
		["Set_Lights_sandstorm"] = true,
		["Set_Lights_storm"] = false,
		["Set_Lights_toxic"] = false,
		["Set_Dystopian_01"] = false,
		["Set_Dystopian_02"] = false,
		["Set_Dystopian_03"] = false,
		["Set_Dystopian_04"] = false,
		["Set_Dystopian_05"] = false,
		["Set_Dystopian_06"] = false,
		["Set_Dystopian_07"] = false,
		["Set_Dystopian_08"] = false,
		["Set_Dystopian_09"] = false,
		["Set_Dystopian_10"] = false,
		["Set_Dystopian_11"] = false,
		["Set_Dystopian_12"] = false,
		["Set_Dystopian_13"] = false,
		["Set_Dystopian_14"] = false,
		["Set_Dystopian_15"] = false,
		["Set_Dystopian_16"] = false,
		["Set_Dystopian_17"] = false,
		["Set_Scifi_01"] = false,
		["Set_Scifi_02"] = false,
		["Set_Scifi_03"] = false,
		["Set_Scifi_04"] = false,
		["Set_Scifi_05"] = false,
		["Set_Scifi_06"] = false,
		["Set_Scifi_07"] = false,
		["Set_Scifi_08"] = false,
		["Set_Scifi_09"] = false,
		["Set_Scifi_10"] = false,
		["Set_Wasteland_01"] = false,
		["Set_Wasteland_02"] = true,
		["Set_Wasteland_03"] = false,
		["Set_Wasteland_04"] = false,
		["Set_Wasteland_05"] = false,
		["Set_Wasteland_06"] = false,
		["Set_Wasteland_07"] = false,
		["Set_Wasteland_08"] = false,
		["Set_Wasteland_09"] = false,
		["Set_Wasteland_10"] = false,
		["Set_Dystopian_Scene"] = false,
		["Set_Scifi_Scene"] = false,
		["Set_Wasteland_Scene"] = false,
		["Set_Crowd_A"] = true,
		["Set_Crowd_B"] = true,
		["Set_Crowd_C"] = true,
		["Set_Crowd_D"] = true,
	},
	[120834] = {
		["VIP_XMAS_DECS"] = true
	},
	[122370] = {
		["Set_Int_MOD_SHELL_DEF"] = true,
		["Set_Int_MOD2_B1"] = true,
		["Set_Int_MOD2_B2"] = false,
		["Set_Int_MOD2_B_TINT"] = true,
		["Set_Int_MOD_BOOTH_DEF"] = true,
		["Set_Int_MOD_BOOTH_BEN"] = false,
		["Set_Int_MOD_BOOTH_WP"] = false,
		["Set_Int_MOD_BOOTH_COMBO"] = false,
		["Set_Int_MOD_BEDROOM_BLOCKER"] = true,
		["Set_Int_MOD_CONSTRUCTION_01"] = true,
		["Set_Int_MOD_CONSTRUCTION_02"] = false,
		["Set_Int_MOD_CONSTRUCTION_03"] = false,
		["SET_OFFICE_STANDARD"] = false,
		["SET_OFFICE_INDUSTRIAL"] = false,
		["SET_OFFICE_HITECH"] = true,
		["Set_Mod1_Style_01"] = false,
		["Set_Mod1_Style_02"] = false,
		["Set_Mod1_Style_03"] = false,
		["Set_Mod1_Style_04"] = false,
		["Set_Mod1_Style_05"] = false,
		["Set_Mod1_Style_06"] = false,
		["Set_Mod1_Style_07"] = true,
		["Set_Mod1_Style_08"] = false,
		["Set_Mod1_Style_09"] = false,
		["Set_Mod2_Style_01"] = false,
		["Set_Mod2_Style_02"] = false,
		["Set_Mod2_Style_03"] = false,
		["Set_Mod2_Style_04"] = false,
		["Set_Mod2_Style_05"] = false,
		["Set_Mod2_Style_06"] = false,
		["Set_Mod2_Style_07"] = false,
		["Set_Mod2_Style_08"] = false,
		["Set_Mod2_Style_09"] = false,
		["set_arena_peds"] = true,
		["set_arena_no peds"] = false,
		["SET_XMAS_DECORATIONS"] = true,
		["Set_Int_MOD_TROPHY_CAREER"] = true,
		["Set_Int_MOD_TROPHY_SCORE"] = false,
		["Set_Int_MOD_TROPHY_WAGEWORKER"] = false,
		["Set_Int_MOD_TROPHY_TIME_SERVED"] = false,
		["Set_Int_MOD_TROPHY_GOT_ONE"] = false,
		["Set_Int_MOD_TROPHY_OUTTA_HERE"] = false,
		["Set_Int_MOD_TROPHY_SHUNT"] = false,
		["Set_Int_MOD_TROPHY_BOBBY"] = false,
		["Set_Int_MOD_TROPHY_KILLED"] = false,
		["Set_Int_MOD_TROPHY_CROWD"] = false,
		["Set_Int_MOD_TROPHY_DUCK"] = false,
		["Set_Int_MOD_TROPHY_BANDITO"] = false,
		["Set_Int_MOD_TROPHY_SPINNER"] = false,
		["Set_Int_MOD_TROPHY_LENS"] = false,
		["Set_Int_MOD_TROPHY_WAR"] = false,
		["Set_Int_MOD_TROPHY_UNSTOPPABLE"] = false,
		["Set_Int_MOD_TROPHY_CONTACT"] = false,
		["Set_Int_MOD_TROPHY_TOWER"] = false,
		["Set_Int_MOD_TROPHY_STEP"] = false,
		["Set_Int_MOD_TROPHY_PEGASUS"] = false,
		["SET_BANDITO_RC"] = true,
		["SET_OFFICE_TRINKET_07"] = false,
		["SET_OFFICE_TRINKET_06"] = false,
		["SET_OFFICE_TRINKET_03"] = false,
		["SET_OFFICE_TRINKET_04"] = true,
		["SET_OFFICE_TRINKET_02"] = false,
		["SET_OFFICE_TRINKET_01"] = false,
	}
}

local ipls = {
	"ba_int_placement_ba",
	"ba_int_placement_ba_interior_0_dlc_int_01_ba_milo_",
	--"xs_arena_interior_vip",
	--"xs_arena_interior_mod_2",
	--"xs_arena_interior_mod",
	--"xs_arena_interior"
}

local function BuildNightclub()
	for k,v in pairs(toggleInt) do
		SetInteriorActive(k, true)
		for n,b in pairs(v) do
			if b then
				EnableInteriorProp(k, n)
				if type(b) == "number" then
					SetInteriorPropColor(k, n, b)
				end
			else
				DisableInteriorProp(k, n)
			end
		end
		RefreshInterior(k)
	end
end

local function CreateNamedRenderTargetForModel(name, model)
	local handle = 0
	if not IsNamedRendertargetRegistered(name) then
		RegisterNamedRendertarget(name, 0)
	end
	if not IsNamedRendertargetLinked(model) then
		LinkNamedRendertarget(model)
	end
	if IsNamedRendertargetRegistered(name) then
		handle = GetNamedRendertargetRenderId(name)
	end

	return handle
end

Citizen.CreateThread(BuildNightclub)

local danceAnim = {
	{
		Name = "Banging Tunes",
		LowIntensityAnimDict = "anim@mp_player_intupperbanging_tunes",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@banging_tunes",
		HighIntensityAnimFile = "banging_tunes"
	},
	{
		Name = "Cats Cradle",
		LowIntensityAnimDict = "anim@mp_player_intuppercats_cradle",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@cats_cradle",
		HighIntensityAnimFile = "cats_cradle"
	},
	{
		Name = "Find The Fish",
		LowIntensityAnimDict = "anim@mp_player_intupperfind_the_fish",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@find_the_fish",
		HighIntensityAnimFile = "find_the_fish"
	},
	{
		Name = "Heart Pumping",
		LowIntensityAnimDict = "anim@mp_player_intupperheart_pumping",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@heart_pumping",
		HighIntensityAnimFile = "heart_pumping"
	},
	{
		Name = "Oh Snap",
		LowIntensityAnimDict = "anim@mp_player_intupperoh_snap",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@oh_snap",
		HighIntensityAnimFile = "oh_snap"
	},
	{
		Name = "Raise The Roof",
		LowIntensityAnimDict = "anim@mp_player_intupperraise_the_roof",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@raise_the_roof",
		HighIntensityAnimFile = "raise_the_roof"
	},
	{
		Name = "Salsa Roll",
		LowIntensityAnimDict = "anim@mp_player_intuppersalsa_roll",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@salsa_roll",
		HighIntensityAnimFile = "salsa_roll"
	},
	{
		Name = "Uncle Disco",
		LowIntensityAnimDict = "anim@mp_player_intupperuncle_disco",
		LowIntensityAnimFile = "idle_a",
		HighIntensityAnimDict = "anim@mp_player_intcelebrationmale@uncle_disco",
		HighIntensityAnimFile = "uncle_disco"
	}
}

local InNightClub = false
local propName = GetHashKey("ba_prop_club_screens_02")

local slaves = {}
local djModel = "ig_djtalignazio"

local modelList = {"a_m_y_vinewood_02", "a_f_y_vinewood_03", "a_m_y_vinewood_03", "a_f_y_vinewood_04", "a_m_y_vinewood_04", "a_f_y_vinewood_02", "a_m_y_vinewood_01", "a_f_y_vinewood_01", "a_m_y_vindouche_01", "g_f_y_vagos_01", "csb_undercover", "a_f_y_soucent_03", "a_m_y_skater_02", "a_m_y_skater_01", "a_m_m_skater_01", "a_f_y_skater_01", "s_f_y_shop_mid", "s_f_y_shop_low", "ig_screen_writer", "g_m_y_salvagoon_03", "s_f_y_hooker_01", "s_f_y_hooker_03", "s_f_y_hooker_02", "a_f_y_hipster_04", "a_m_y_hipster_03", "a_f_y_hipster_03", "a_m_y_hipster_02", "a_f_y_hipster_02", "a_f_y_hipster_01", "a_m_y_hipster_01", "a_m_y_hippy_01", "a_f_y_hippie_01", "a_f_y_genhot_01", "a_f_y_eastsa_03" }

local function CreateSlaveObjects()
	RequestAnimDict("anim@amb@nightclub@dancers@crowddance_groups@hi_intensity")
	while not HasAnimDictLoaded("anim@amb@nightclub@dancers@crowddance_groups@hi_intensity") do Citizen.Wait(100) end

	for k,v in pairs(simplePedPos) do
		local modelHash = GetHashKey(modelList[math.random(1, #modelList)])
		if IsModelInCdimage(modelHash) then
			if not HasModelLoaded(modelHash) then RequestModel(modelHash) while not HasModelLoaded(modelHash) do Citizen.Wait(0) end end

			local p = CreatePed(4, modelHash, v.pos, v.heading, false, true)
			SetBlockingOfNonTemporaryEvents(p, true)
			SetEntityInvincible(p, true)
			SetPedCanRagdoll(p, false)
			TaskTurnPedToFaceEntity(p, slaves[1], 1000)
			TaskPlayAnim(p, "anim@amb@nightclub@dancers@crowddance_groups@hi_intensity", randomAnim[math.random(1, #randomAnim)], 8.0, -8.0, -1, 9, 1, 0, 0, 0)
		end
	end

	for k,v in pairs(modelList) do SetModelAsNoLongerNeeded(GetHashKey(v)) end
end

local function CreateSlavePeds()
	local animDJ = {"mini@strip_club@idles@dj@base", "base"}
	RequestAnimDict(animDJ[1])
	RequestModel(djModel)

	while not HasModelLoaded(djModel) or not HasAnimDictLoaded(animDJ[1]) do Citizen.Wait(500) end

	for k,v in pairs(slaves) do DeletePed(v) end
	slaves = {}

	local DJ = CreatePed(4, djModel, -1602.862, -3012.739, -78.606, -81.6721, 0, 0)
	TaskSetBlockingOfNonTemporaryEvents(DJ, 1)
	FreezeEntityPosition(DJ, true)
	SetEntityInvincible(DJ, true)
	SetPedRandomComponentVariation(DJ)
	SetPedRandomProps(DJ)
	SetPedCanRagdoll(DJ, true)
	SetEntityCollision(DJ, 1, 0)
	TaskPlayAnim(DJ, animDJ[1], animDJ[2], 8.0, -8.0, -1, 9, 1, 0, 0, 0)

	table.insert(slaves, DJ)
end

AddEventHandler("onResourceStop", function(r)
	if r == GetCurrentResourceName() then
		for k,v in pairs(slaves) do DeletePed(v) end
		slaves = {}
	end
end)

local function TaskPlayAnim2(ped, dict, anim, flag, duration)
	if not DoesAnimDictExist(dict) then return end
	if not HasAnimDictLoaded(dict) then RequestAnimDict(dict) while not HasAnimDictLoaded(dict) do Citizen.Wait(100) end end

	TaskPlayAnim(ped, dict, anim, 8.0, -8.0, duration, flag, 0, 0, 0, 0)
end

local function SetMovementClipset(ped, c)
	if not DoesAnimDictExist(c) then return end
	if not HasAnimSetLoaded(c) then RequestAnimSet(c) while not HasAnimSetLoaded(c) do Citizen.Wait(100) end end
	SetPedMovementClipset(ped, c, 0)
end

local function ShowAboveRadarMessage(message, back)
	if back then Citizen.InvokeNative(0x92F0DA1E27DB96DC, back) end
	SetNotificationTextEntry("jamyfafi")
	AddTextComponentString(message)
	if string.len(message) > 99 and AddLongString then AddLongString(message) end
	return DrawNotification(0, 1)
end

local function DrawTopNotification(txt, beep)
	SetTextComponentFormat("jamyfafi")
	AddTextComponentString(txt)
	if string.len(txt) > 99 and AddLongString then AddLongString(txt) end
	DisplayHelpTextFromStringLabel(0, 0, beep, -1)
end

local grooving = false
local function HandleNightclubDance()
	local ped = GetPlayerPed(-1)
	local plyPos = GetEntityCoords(ped)

	if GetDistanceBetweenCoords(plyPos, -1595.837, -3012.552, -79.006) <= 50 then
		if not grooving then
			SetMovementClipset(ped, "anim@move_m@grooving@")
			grooving = true
		end

		DrawTopNotification("Appuyez sur ~INPUT_CONTEXT~ pour danser.")

		if IsControlJustPressed(0, 51) and InNightClub then
			Citizen.Wait(0)

			local index = 1
			local flag = false
			TaskPlayAnim2(ped, danceAnim[index].LowIntensityAnimDict, danceAnim[index].LowIntensityAnimFile, 9, -1)

			while not IsControlJustPressed(0, 51) do
				Citizen.Wait(0)

				if IsControlJustPressed(0, 22) then
					flag = not flag
					TaskPlayAnim2(ped, flag and danceAnim[index].HighIntensityAnimDict or danceAnim[index].LowIntensityAnimDict, flag and danceAnim[index].HighIntensityAnimFile or danceAnim[index].LowIntensityAnimFile, 9, -1)
				end

				if IsControlJustPressed(0, 24) then
					index = index + 1
					if index > #danceAnim then index = 1 end
					flag = false
					TaskPlayAnim2(ped, flag and danceAnim[index].HighIntensityAnimDict or danceAnim[index].LowIntensityAnimDict, flag and danceAnim[index].HighIntensityAnimFile or danceAnim[index].LowIntensityAnimFile, 9, -1)
				end

				if IsControlPressed(0, 44) then
					SetEntityHeading(ped, GetEntityHeading(ped) + 2.0)
				end

				if IsControlPressed(0, 51) then
					SetEntityHeading(ped, GetEntityHeading(ped) - 2.0)
				end
				DrawTopNotification("~INPUT_ATTACK~ Danse: " .. danceAnim[index].Name .. "~n~~INPUT_JUMP~ Changer l'intensité~n~~INPUT_COVER~ / ~INPUT_CONTEXT~ Bouger~n~~INPUT_CONTENT~ Arrêter de danser")
			end
			ClearPedTasks(ped)
		end
	elseif grooving then
		grooving = false
		ResetPedMovementClipset(ped, 0.0)
	end
end

local pedCreated = false
Citizen.CreateThread(function()
	while true do
		Citizen.Wait(2000)

		InNightClub = GetInteriorFromEntity(PlayerPedId()) == 271617
	end
end)

Citizen.CreateThread(function()
	for k,v in pairs(ipls) do RequestIpl(v) end

	local screen2, screen

	while true do
		Citizen.Wait(0)

		if InNightClub then
			if not pedCreated then
				CreateSlavePeds()
				CreateSlaveObjects()

				screen2 = CreateNamedRenderTargetForModel("Club_Projector", GetHashKey('ba_prop_battle_club_screen'))
				screen = CreateNamedRenderTargetForModel("Club_Projector", propName)

				SetTvAudioFrontend(1)
				SetTvVolume(-5.0)
				SetTvChannel(0)
				LoadTvChannelSequence(0, "PL_TOU_LED_PALACE", 1)

				pedCreated = true
			end

			DisablePlayerFiring(PlayerId(), true)
			DisableControlAction(0, 22, true)
			DisableControlAction(0, 24, true)
			DisableControlAction(0, 25, true)

			DisableControlAction(0, 257, true)
			DisableControlAction(0, 263, true)
			DisableControlAction(0, 264, true)

			HandleNightclubDance()

			Set_2dLayer(4)
			SetScriptGfxDrawBehindPausemenu(1)
			SetTextRenderId(screen)
			DrawTvChannel(.5, .5, 1.0, 1.0, .0, 255, 255, 255, 255)

			SetTextRenderId(screen2)
			DrawTvChannel(.5, .5, 1.0, 1.0, .0, 255, 255, 255, 255)

			SetTextRenderId(GetDefaultScriptRendertargetRenderId())
		elseif screen or screen2 then
			Citizen.InvokeNative(0xE9F6FFE837354DD4, "Club_Projector")
			ResetPedMovementClipset(GetPlayerPed(-1), 0.0)
			screen = nil
			screen2 = nil

			for k,v in pairs(slaves) do if DoesEntityExist(v) then DeleteEntity(v) end end
			slaves = {}

			pedCreated = false
		end
	end
end)
